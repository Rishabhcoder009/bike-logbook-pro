<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bike Maintenance Logbook</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
background:#1c1c1c;
color:#e0e0e0;
padding:25px;
}

h1,h2{
color:#00aaff;
text-align:center;
margin-bottom:20px;
}

.container{
max-width:1000px;
margin:auto;
}

section{
margin-bottom:25px;
border:1px solid #333;
padding:20px;
border-radius:12px;
background:#262626;
}

label{
display:block;
margin:8px 0;
}

input,textarea,select,button{
width:100%;
margin-bottom:12px;
padding:12px;
border-radius:8px;
border:none;
font-size:1rem;
}

button{
background-color:#00aaff;
color:#fff;
cursor:pointer;
transition:0.2s;
}

button:hover{
background-color:#0088cc;
}

.table-wrapper{
overflow-x:auto;
}

table{
width:100%;
border-collapse:collapse;
margin-top:15px;
min-width:950px;
}

th,td{
border:1px solid #555;
padding:12px;
text-align:left;
vertical-align:middle;
}

th{
background-color:#333;
}

.completed-label{
display:flex;
align-items:center;
gap:8px;
white-space:nowrap;
}

.deleteBtn{
background:#ff4d4d;
padding:8px 14px;
border-radius:6px;
}

.deleteBtn:hover{
background:#cc0000;
}

img.thumb{
max-width:60px;
max-height:60px;
border-radius:6px;
display:block;
margin-bottom:6px;
}
</style>
</head>

<body>

<h1>üèç Bike Maintenance Logbook</h1>

<div class="container">

<section>
<h2>Add Maintenance Entry</h2>

<label>Date</label>
<input type="date" id="date" required>

<label for="task">Task:</label>
<select id="task" required>
<option value="Remove loose dirt">Cleaning - Remove loose dirt</option>
<option value="Wash frame & wheels">Cleaning - Wash frame & wheels</option>
<option value="Clean chain & drivetrain">Cleaning - Clean chain & drivetrain</option>
<option value="Dry thoroughly">Cleaning - Dry thoroughly</option>
<option value="Lubricate moving parts">Cleaning - Lubricate moving parts</option>
<option value="Check tire pressure">Tires & Wheels - Check air pressure</option>
<option value="Inspect tires">Tires & Wheels - Inspect for damage</option>
<option value="Fix flat tire">Tires & Wheels - Fix flat tire</option>
<option value="True wheels">Tires & Wheels - True wheels</option>
<option value="Inspect brake pads">Brakes - Inspect brake pads</option>
<option value="Adjust brake cables">Brakes - Adjust brake cable tension</option>
<option value="Check wheel hubs">Bearings & Moving Parts - Wheel hubs</option>
<option value="Check headset">Bearings & Moving Parts - Headset</option>
<option value="Check pedals & bottom bracket">Bearings & Moving Parts - Pedals & Bottom Bracket</option>
<option value="Clean & lubricate chain">Chain Maintenance - Clean & lubricate</option>
<option value="Check chain tension">Chain Maintenance - Check chain tension</option>
<option value="Replace stretched chain">Chain Maintenance - Replace if stretched</option>
<option value="Inspect frame">Frame & Accessories - Inspect frame</option>
<option value="Tighten bolts">Frame & Accessories - Tighten bolts</option>
<option value="Check reflectors & bell">Frame & Accessories - Check reflectors & bell</option>
<option value="Flat tire repair">DIY Repair - Flat tire repair</option>
<option value="Loose brakes adjustment">DIY Repair - Loose brakes adjustment</option>
<option value="Squeaky chain lubrication">DIY Repair - Squeaky chain lubrication</option>
<option value="Wobbly wheels adjustment">DIY Repair - Wobbly wheels adjustment</option>
<option value="Tighten loose pedals">DIY Repair - Tighten loose pedals</option>
</select>

<label>Notes (Optional)</label>
<textarea id="notes" placeholder="Additional details..."></textarea>

<label>Photo</label>
<input type="file" id="photo" accept="image/*">

<button onclick="addEntry()">Add Entry</button>
<button onclick="exportToCSV()">Export to Excel</button>

</section>

<section>
<h2>Maintenance Log</h2>

<div class="table-wrapper">
<table id="logTable">
<thead>
<tr>
<th>Date</th>
<th>Task</th>
<th>Notes</th>
<th>Photo</th>
<th>Completed</th>
<th>Delete</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

</section>

</div>

<script>

document.addEventListener("DOMContentLoaded", loadEntries);

function saveEntries(){
const rows = document.querySelectorAll("#logTable tbody tr");
let data = [];

rows.forEach(row=>{
data.push({
date: row.cells[0].innerText,
task: row.cells[1].innerText,
notes: row.cells[2].innerText,
photo: row.cells[3].querySelector("img")?.src || "",
completed: row.cells[4].querySelector("input").checked
});
});

localStorage.setItem("bikeLogData", JSON.stringify(data));
}

function loadEntries(){
const data = JSON.parse(localStorage.getItem("bikeLogData")) || [];
data.forEach(entry=>{
createRow(entry.date, entry.task, entry.notes, entry.photo, entry.completed);
});
}

function addEntry(){
const date = document.getElementById("date").value;
const task = document.getElementById("task").value;
const notes = document.getElementById("notes").value;
const photoInput = document.getElementById("photo");

if(!date){
alert("Please select a date.");
return;
}

if(photoInput.files[0]){
const reader = new FileReader();
reader.onload = function(e){
createRow(date, task, notes, e.target.result, false);
saveEntries();
};
reader.readAsDataURL(photoInput.files[0]);
}else{
createRow(date, task, notes, "", false);
saveEntries();
}

document.getElementById("date").value="";
document.getElementById("notes").value="";
document.getElementById("photo").value="";
}

function createRow(date, task, notes, photo, completed){
const table = document.querySelector("#logTable tbody");
const row = table.insertRow();

row.insertCell(0).innerText = date;
row.insertCell(1).innerText = task;
row.insertCell(2).innerText = notes;

const photoCell = row.insertCell(3);
if(photo){
const img = document.createElement("img");
img.src = photo;
img.className="thumb";
photoCell.appendChild(img);
}else{
photoCell.innerText="No photo";
}

const completedCell = row.insertCell(4);
const label = document.createElement("label");
label.className="completed-label";

const checkbox = document.createElement("input");
checkbox.type="checkbox";
checkbox.checked=completed;
checkbox.onchange=saveEntries;

label.appendChild(checkbox);
label.appendChild(document.createTextNode("Completed"));
completedCell.appendChild(label);

const deleteCell = row.insertCell(5);
const deleteBtn = document.createElement("button");
deleteBtn.innerText="Delete";
deleteBtn.className="deleteBtn";
deleteBtn.onclick=function(){
row.remove();
saveEntries();
};
deleteCell.appendChild(deleteBtn);
}

function exportToCSV(){
const data = JSON.parse(localStorage.getItem("bikeLogData")) || [];
let csv="Date,Task,Notes,Completed\n";

data.forEach(entry=>{
csv+=`${entry.date},"${entry.task}","${entry.notes}",${entry.completed?"Yes":"No"}\n`;
});

const blob=new Blob([csv],{type:"text/csv"});
const link=document.createElement("a");
link.href=URL.createObjectURL(blob);
link.download="bike-maintenance-backup.csv";
link.click();
}

</script>

</body>
</html>