<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bike Logbook Pro</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#1c1c1c;color:#e0e0e0;padding:20px;}
h1,h2{color:#00aaff;}
header{text-align:center;margin-bottom:20px;}
.container{max-width:900px;margin:auto;}
section{margin-bottom:20px;border:1px solid #333;padding:15px;border-radius:10px;background:#262626;}
label{display:block;margin:5px 0;}
input,textarea,select,button{width:100%;margin-bottom:10px;padding:10px;border-radius:5px;border:none;}
button{background-color:#00aaff;color:#fff;cursor:pointer;}
button:hover{background-color:#0088cc;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{border:1px solid #555;padding:8px;text-align:left;vertical-align:middle;}
th{background-color:#333;}
.card{background:#262626;border:1px solid #444;border-radius:10px;padding:15px;margin-top:10px;max-height:500px;overflow-y:auto;}
.card h3{color:#00aaff;margin-top:10px;}
.card ul,.card ol{margin-left:20px;margin-bottom:10px;}
.card button{width:auto;padding:8px 15px;margin-top:10px;}
img.thumb{max-width:60px;max-height:60px;border-radius:5px;display:block;margin-bottom:5px;cursor:pointer;}
.completed-label{display:flex;align-items:center;gap:5px;}
@media(max-width:600px){h1{font-size:1.5em;}h2{font-size:1.2em;}}
</style>
</head>
<body>

<header>
<h1>Bike Logbook Pro</h1>
<p>Track maintenance, cleaning, repairs, attach photos</p>
</header>

<div class="container">

<!-- Log Form -->
<section>
<h2>Add New Log Entry</h2>
<form id="logForm">
<label for="date">Date:</label>
<input type="date" id="date" required>
<label for="task">Task:</label>
<select id="task" required>
<option value="Remove loose dirt">Cleaning - Remove loose dirt</option>
<option value="Wash frame & wheels">Cleaning - Wash frame & wheels</option>
<option value="Clean chain & drivetrain">Cleaning - Clean chain & drivetrain</option>
<option value="Dry thoroughly">Cleaning - Dry thoroughly</option>
<option value="Lubricate moving parts">Cleaning - Lubricate moving parts</option>
<option value="Check tire pressure">Tires & Wheels - Check air pressure</option>
<option value="Inspect tires">Tires & Wheels - Inspect for damage</option>
<option value="Fix flat tire">Tires & Wheels - Fix flat tire</option>
</select>
<label for="notes">Notes:</label>
<textarea id="notes" rows="3" placeholder="Add notes or issues..."></textarea>
<label for="photo">Attach Photo (optional):</label>
<input type="file" id="photo" accept="image/*">
<button type="submit">Add Log Entry</button>
</form>
</section>

<!-- Log Table -->
<section>
<h2>Maintenance Log</h2>
<table id="logTable">
<thead>
<tr>
<th>Date</th>
<th>Task</th>
<th>Notes</th>
<th>Photo & Completed</th>
<th>Action</th>
</tr>
</thead>
<tbody></tbody>
</table>
</section>

<!-- Guide -->
<section>
<h2>Maintenance & Repair Guide</h2>
<button id="toggleGuide">Show Guide</button>
<div class="card" id="guideCard" style="display:none;">
<p>Maintain, repair, and clean your non-gear bicycle like a pro üö¥‚Äç‚ôÇÔ∏è‚ú®</p>

<h3>1. Safety First</h3>
<ul><li>Workspace, gloves, rags, tools, bike stand</li></ul>

<h3>2. Cleaning</h3>
<ol><li>Remove dirt</li><li>Wash frame & wheels</li><li>Clean drivetrain</li><li>Dry</li><li>Lubricate</li></ol>

<h3>3. Tire & Wheel</h3>
<ul><li>Check PSI</li><li>Inspect damage</li><li>Fix flats</li><li>True wheels</li></ul>

<h3>4. Brakes</h3>
<ul><li>Inspect pads & cables</li></ul>

<h3>5. Bearings</h3>
<ul><li>Wheel hubs, headset, pedals</li></ul>

<h3>6. Chain</h3>
<ul><li>Clean, lube, tension, replace</li></ul>

<h3>7. Frame & Accessories</h3>
<ul><li>Inspect, tighten bolts, check reflectors & bell</li></ul>

<h3>8. Routine Schedule</h3>
<table><tr><th>Task</th><th>Frequency</th></tr>
<tr><td>Clean frame & chain</td><td>Weekly / after muddy rides</td></tr>
<tr><td>Check tire pressure</td><td>Every ride</td></tr>
<tr><td>Lubricate chain & parts</td><td>Every 2‚Äì3 weeks</td></tr>
<tr><td>Inspect brakes</td><td>Monthly</td></tr>
<tr><td>Wheel alignment & bearings</td><td>Every 3‚Äì6 months</td></tr>
<tr><td>Replace worn parts</td><td>As needed</td></tr>
</table>

<h3>9. DIY Repairs</h3>
<ul><li>Flats, brakes, squeaky chain, wobbly wheels, pedals</li></ul>

<h3>10. Tools</h3>
<ul><li>Allen keys, wrench, tire levers, lubricant, degreaser, pump, spoke wrench, rags</li></ul>

<button id="downloadPDF">Download PDF Checklist</button>
</div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const logTableBody=document.querySelector('#logTable tbody');
const logForm=document.getElementById('logForm');
let logs=JSON.parse(localStorage.getItem('bikeLogs'))||[];

// Render logs
function renderLogs(){
  logTableBody.innerHTML='';
  logs.forEach((log,index)=>{
    const row=document.createElement('tr');
    row.innerHTML=`
      <td>${log.date}</td>
      <td>${log.task}</td>
      <td>${log.notes}</td>
      <td>
        ${log.photo?`<img class="thumb" src="${log.photo}" onclick="window.open('${log.photo}','_blank')">`:''}
        <label class="completed-label"><input type="checkbox" data-index='${index}' ${log.completed?'checked':''}> Completed</label>
      </td>
      <td><button class="deleteBtn" data-index='${index}'>Delete</button></td>
    `;
    logTableBody.appendChild(row);
  });
}
renderLogs();

// Add log
logForm.addEventListener('submit',function(e){
  e.preventDefault();
  const date=document.getElementById('date').value;
  const task=document.getElementById('task').value;
  const notes=document.getElementById('notes').value;
  const photoInput=document.getElementById('photo');
  if(photoInput.files[0]){
    const reader=new FileReader();
    reader.onload=function(event){ addLog(date,task,notes,event.target.result); }
    reader.readAsDataURL(photoInput.files[0]);
  } else addLog(date,task,notes,'');
});
function addLog(date,task,notes,photo){
  logs.push({date,task,notes,photo,completed:false});
  localStorage.setItem('bikeLogs',JSON.stringify(logs));
  logForm.reset();
  renderLogs();
}

// Toggle completed checkbox
logTableBody.addEventListener('change',function(e){
  if(e.target.type==='checkbox'){
    const index=e.target.dataset.index;
    logs[index].completed=e.target.checked;
    localStorage.setItem('bikeLogs',JSON.stringify(logs));
    renderLogs();
  }
});

// Delete
logTableBody.addEventListener('click',function(e){
  if(e.target.classList.contains('deleteBtn')){
    const index=e.target.dataset.index;
    logs.splice(index,1);
    localStorage.setItem('bikeLogs',JSON.stringify(logs));
    renderLogs();
  }
});

// Toggle guide
const toggleBtn=document.getElementById('toggleGuide');
const guideCard=document.getElementById('guideCard');
toggleBtn.addEventListener('click',()=>{
  if(guideCard.style.display==='none'){ guideCard.style.display='block'; toggleBtn.textContent='Hide Guide'; }
  else{ guideCard.style.display='none'; toggleBtn.textContent='Show Guide'; }
});

// PDF
document.getElementById('downloadPDF').addEventListener('click',()=>{
  const { jsPDF }=window.jspdf;
  const doc=new jsPDF();
  const guide=document.querySelector('.card').innerText;
  const lines=doc.splitTextToSize(guide,180);
  doc.text(lines,10,10);
  doc.save('Bicycle_Maintenance_Checklist.pdf');
});
</script>
</body>
</html>