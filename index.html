<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>BikeCare - Maintenance Tracker</title>

<!-- PWA Support -->
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="BikeCare">
<meta name="theme-color" content="#2d6cdf">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #f4f6f9;
}

header {
  background: #2d6cdf;
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
}

.container {
  padding: 15px;
  max-width: 900px;
  margin: auto;
}

form {
  background: white;
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 20px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

button {
  margin-top: 15px;
  padding: 10px;
  width: 100%;
  border: none;
  border-radius: 6px;
  background: #2d6cdf;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

button:hover {
  background: #1f4fa3;
}

.log-entry {
  background: white;
  padding: 15px;
  margin-bottom: 10px;
  border-radius: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.log-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
}

.badge {
  background: green;
  color: white;
  padding: 4px 8px;
  border-radius: 5px;
  font-size: 12px;
  margin-right: 10px;
}

.delete-btn {
  background: red;
  padding: 6px 10px;
  font-size: 14px;
}

canvas {
  background: white;
  padding: 15px;
  border-radius: 10px;
  margin-top: 20px;
}
</style>
</head>

<body>

<header>ðŸš´ BikeCare - Maintenance Tracker</header>

<div class="container">

<form id="logForm">
<label>Date:</label>
<input type="date" id="date" required>

<label for="task">Task:</label>
<select id="task" required>
<option value="Remove loose dirt">Cleaning - Remove loose dirt</option>
<option value="Wash frame & wheels">Cleaning - Wash frame & wheels</option>
<option value="Clean chain & drivetrain">Cleaning - Clean chain & drivetrain</option>
<option value="Dry thoroughly">Cleaning - Dry thoroughly</option>
<option value="Lubricate moving parts">Cleaning - Lubricate moving parts</option>
<option value="Check tire pressure">Tires & Wheels - Check air pressure</option>
<option value="Inspect tires">Tires & Wheels - Inspect for damage</option>
<option value="Fix flat tire">Tires & Wheels - Fix flat tire</option>
<option value="True wheels">Tires & Wheels - True wheels</option>
<option value="Inspect brake pads">Brakes - Inspect brake pads</option>
<option value="Adjust brake cables">Brakes - Adjust brake cable tension</option>
<option value="Check wheel hubs">Bearings - Wheel hubs</option>
<option value="Check headset">Bearings - Headset</option>
<option value="Check pedals & bottom bracket">Bearings - Pedals & Bottom Bracket</option>
<option value="Clean & lubricate chain">Chain - Clean & lubricate</option>
<option value="Check chain tension">Chain - Check chain tension</option>
<option value="Replace stretched chain">Chain - Replace if stretched</option>
<option value="Inspect frame">Frame - Inspect frame</option>
<option value="Tighten bolts">Frame - Tighten bolts</option>
<option value="Check reflectors & bell">Frame - Check reflectors & bell</option>
<option value="Flat tire repair">DIY - Flat tire repair</option>
<option value="Loose brakes adjustment">DIY - Loose brakes adjustment</option>
<option value="Squeaky chain lubrication">DIY - Squeaky chain lubrication</option>
<option value="Wobbly wheels adjustment">DIY - Wobbly wheels adjustment</option>
<option value="Tighten loose pedals">DIY - Tighten loose pedals</option>
</select>

<button type="submit">Add Log Entry</button>
</form>

<h3>Maintenance Log</h3>
<div id="logList"></div>

<h3>Maintenance Statistics</h3>
<canvas id="taskChart"></canvas>

</div>

<script>
let logs = JSON.parse(localStorage.getItem("bikeLogs")) || [];

function saveLogs() {
  localStorage.setItem("bikeLogs", JSON.stringify(logs));
}

function renderLogs() {
  const logList = document.getElementById("logList");
  logList.innerHTML = "";

  logs.forEach((log, index) => {
    logList.innerHTML += `
      <div class="log-entry">
        <div class="log-top">
          <div>
            <span class="badge">Completed</span>
            ${log.task}
          </div>
          <button class="delete-btn" onclick="deleteLog(${index})">Delete</button>
        </div>
        <div style="margin-top:8px;">Date: ${log.date}</div>
      </div>
    `;
  });

  updateChart();
}

function deleteLog(index) {
  logs.splice(index, 1);
  saveLogs();
  renderLogs();
}

document.getElementById("logForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const date = document.getElementById("date").value;
  const task = document.getElementById("task").value;

  logs.push({ date, task });
  saveLogs();
  renderLogs();
  this.reset();
});

let chart;

function updateChart() {
  const counts = {};
  logs.forEach(log => {
    counts[log.task] = (counts[log.task] || 0) + 1;
  });

  const labels = Object.keys(counts);
  const data = Object.values(counts);

  if (chart) chart.destroy();

  chart = new Chart(document.getElementById("taskChart"), {
    type: "bar",
    data: {
      labels: labels,
      datasets: [{
        label: "Times Completed",
        data: data
      }]
    }
  });
}

renderLogs();
</script>

</body>
</html>
